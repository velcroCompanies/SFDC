<aura:component implements="force:appHostable" controller="wbsendit.ImportWizardController">

    <!-- PUBLIC ATTRIBUTES -->
    <aura:attribute access="public" name="listdetail" type="String" />
    <aura:attribute access="public" name="listId" type="String" />
    <aura:attribute access="public" name="scheduledId" type="String" />
    <aura:attribute access="public" name="subscriberListId" type="String" />
    <aura:attribute access="public" name="subscriberListName" type="String" />
    <aura:attribute access="public" name="isPremiumOrTrial" type="Boolean" />
    <aura:attribute access="public" name="isConnected" type="Boolean" />
    <aura:attribute access="public" name="isAPIEnabled" type="Boolean" />
    <aura:attribute access="public" name="preventMemberSync" type="Boolean" default="true" />

    <!-- PRIVATE ATTRIBUTES -->
    <aura:attribute access="private" name="importConfig" type="String" />
    <aura:attribute access="private" name="step1" type="String" default="slds-is-active" />
    <aura:attribute access="private" name="step2" type="String" default="" />
    <aura:attribute access="private" name="step3" type="String" default="" />
    <aura:attribute access="private" name="step4" type="String" default="" />
    <aura:attribute access="private" name="pctComplete" type="String" default="0%" />
    <aura:attribute access="private" name="showUpgradeMsgClass" type="String" default="slds-hide" />
    <aura:attribute access="private" name="showConnectMsgClass" type="String" default="slds-hide" />
    <aura:attribute access="private" name="showGeneralMsgClass" type="String" default="slds-hide" />
    <aura:attribute access="private" name="generalMsg" type="String" />

    <!-- HANDLERS -->
    <aura:handler name="init" value="{!this}" action="{!c.onInit}" />
    <aura:handler name="ImportWizardEvent" event="wbsendit:ImportWizardEvent" action="{!c.doImportWizardEvent}" />

    <!-- EVENTS -->
    <aura:registerEvent name="ImportWizardEvent" type="wbsendit:ImportWizardEvent" />

    <!-- METHODS -->
    <aura:method access="public" name="open" action="{!c.openWizard}" />

    <div aura:id="wizard-id">

        <div role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal--large" aria-labelledby="header43">
            <div class="slds-modal__container">
                <div class="slds-modal__header">
                    <lightning:buttonIcon class="slds-modal__close" iconName="utility:close" size="large" variant="bare-inverse" alternativeText="Close" onclick="{!c.doCancel}" />
                    <h2 aura:id="headerId" id="header43" class="slds-text-heading--medium">{!v.importConfig.title}</h2>
                    <p>{!v.importConfig.importSubTitle}</p>
                </div>

                <div class="{!v.showUpgradeMsgClass}">
                    <div class="slds-notify slds-notify--alert slds-theme--error slds-theme--alert-texture" role="alert">
                        <span class="slds-assistive-text">Info</span>
                        <h2>
                            <span class="slds-p-right--xx-small">Your premium trial has expired - <a href="/apex/generalsettings?cmpid=4" target="_blank">Upgrade now</a></span>
                        </h2>
                    </div>
                </div>
                <div class="{!v.showConnectMsgClass}">
                    <div class="slds-notify slds-notify--alert slds-theme--warning slds-theme--alert-texture" role="alert">
                        <span class="slds-assistive-text">Info</span>
                        <h2>
                            <span class="slds-p-right--xx-small">You first need to Connect Salesforce to Campaign Monitor - Navigate to 'Sync Settings'</span>
                        </h2>
                    </div>
                </div>
                <div class="{!v.showGeneralMsgClass}">
                    <div class="slds-notify slds-notify--alert slds-theme--warning slds-theme--alert-texture" role="alert">
                        <span class="slds-assistive-text">Info</span>
                        <h2>
                            <span class="slds-p-right--xx-small">{!v.generalMsg}</span>
                        </h2>
                    </div>
                </div>

                <div class="{!v.importConfig.bodyClass}" style="height: 600px; background: #f9f9f9;">

                    <!-- Components injected here -->
                    {!v.body}
                </div>

                <div class="slds-modal__footer slds-grid slds-grid--align-spread">
                    <div class="slds-progress slds-progress--shade slds-order--2">
                        <ol class="slds-progress__list">

                            <li class="{! 'slds-progress__item ' + v.step1 }">

                                <aura:if isTrue="{!v.step1 == 'slds-is-completed' }">
                                    <lightning:buttonIcon iconName="utility:success" class="slds-button--icon slds-progress__marker slds-progress__marker--icon" />
                                    <aura:set attribute="else">
                                        <button class="slds-button slds-progress__marker" aria-describedby="step-2-tooltip" data-aura-rendered-by="38:0" />
                                    </aura:set>
                                </aura:if>

                            </li>

                            <li class="{! 'slds-progress__item ' + v.step2 }">

                                <aura:if isTrue="{!v.step2 == 'slds-is-completed' }">
                                    <lightning:buttonIcon iconName="utility:success" class="slds-button--icon slds-progress__marker slds-progress__marker--icon" />
                                    <aura:set attribute="else">
                                        <button class="slds-button slds-progress__marker" aria-describedby="step-2-tooltip" data-aura-rendered-by="38:0" />
                                    </aura:set>
                                </aura:if>

                            </li>

                            <li class="{! 'slds-progress__item ' + v.step3 }">
                                <aura:if isTrue="{!v.step3 == 'slds-is-completed' }">
                                    <lightning:buttonIcon iconName="utility:success" class="slds-button--icon slds-progress__marker slds-progress__marker--icon" />
                                    <aura:set attribute="else">
                                        <button class="slds-button slds-progress__marker" aria-describedby="step-2-tooltip" data-aura-rendered-by="38:0" />
                                    </aura:set>
                                </aura:if>
                            </li>
                            <li class="{! 'slds-progress__item ' + v.step4 }">
                                <aura:if isTrue="{!v.step4 == 'slds-is-completed' }">
                                    <lightning:buttonIcon iconName="utility:success" class="slds-button--icon slds-progress__marker slds-progress__marker--icon" />
                                    <aura:set attribute="else">
                                        <button class="slds-button slds-progress__marker" aria-describedby="step-2-tooltip" data-aura-rendered-by="38:0" />
                                    </aura:set>
                                </aura:if>
                            </li>

                        </ol>
                        <div class="slds-progress-bar slds-progress-bar_x-small" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" role="progressbar">
                            <span class="slds-progress-bar__value" style="{! 'width:' + v.pctComplete }">
							<span class="slds-assistive-text">Progress: {!v.pctComplete}</span>
                            </span>
                        </div>
                    </div>
                    <button aura:id="cancel-id" class="slds-button slds-button--neutral slds-order--1" onclick="{!c.doCancel}">Cancel</button>
                    <button aura:id="next-id" class="slds-button slds-button--brand slds-order--3" onclick="{!c.doNextStep}" disabled="{!v.importConfig.isNextDisabled}">Next</button>
                    <button aura:id="runonce-id" class="slds-button slds-button--brand slds-order--3 slds-hide" onclick="{!c.doRunOnce}" disabled="{!v.importConfig.isRunOnceDisabled}">Import Now</button>
                    <button aura:id="save-id" class="slds-button slds-button--brand slds-order--3 slds-hide" onclick="{!c.doSaveSchedule}" disabled="{!v.importConfig.isScheduleDisabled}">Save</button>
                    <button aura:id="saverun-id" class="slds-button slds-button--brand slds-order--3 slds-hide" onclick="{!c.doSaveScheduleRunOnce}" disabled="{!v.importConfig.isScheduleDisabled}">Save &amp; Import</button>

                </div>
            </div>
        </div>
        <div aura:id="sldsWizardBackdrop" class="slds-backdrop slds-backdrop--open"></div>
    </div>
</aura:component>