<apex:page controller="wbsendit.SendItReportController" showChat="false" sidebar="{!showSidebar}" tabStyle="Sendit__tab" action="{!checkSetup}" lightningStylesheets="true">

    <style type="text/css">
        .outer td.oRight {padding: 0px;}
        body {padding: 0px !important;}
    </style>

    <apex:slds />

    <apex:outputPanel layout="block" rendered="{!UPPER(showUpgradeMsgClass) == 'SLDS-SHOW'}">
        <div class="slds-notify slds-notify--alert slds-theme--error slds-theme--alert-texture" role="alert">
            <h2>
                <span class="slds-p-right--xx-small">Your Campaign Monitor for Salesforce trial has expired -
                    <a href="/apex/generalsettings?cmpid=4" target="_blank">Upgrade now</a>
                </span>
            </h2>
        </div>
    </apex:outputPanel>

    <apex:outputPanel layout="block" rendered="{!UPPER(showGeneralMsgClass) == 'SLDS-SHOW'}">
        <div class="slds-notify slds-notify--alert slds-theme--warning slds-theme--alert-texture" role="alert">
            <h2>
                <span class="slds-p-right--xx-small">
                    <apex:outputText value="{!generalMsg}" escape="false"></apex:outputText>
                </span>
            </h2>
        </div>
    </apex:outputPanel>

    <apex:form >
        <apex:pageMessages escape="false" />
        <apex:pageBlock rendered="{!showClientList}">
            <apex:pageBlockSection columns="2">
                <apex:pageBlockSectionItem >
                    <apex:selectList id="clientID" value="{!clientID}" size="1" title="Clients">
                        <apex:selectOptions value="{!ClientList}"></apex:selectOptions>
                        <apex:actionSupport event="onchange" reRender="Details" action="{!initPage}"/>
                    </apex:selectList>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
        </apex:pageBlock>
        <apex:panelGroup >
            <apex:outputPanel id="Details" rendered="{!valildUrl}">
                <iframe height="800px" id="idCMIFrame" name="idCMIFrame" src="{!frameURL}" width="100%" frameborder="false" style="border: 0px solid #ffffff;">Campaign Monitor could not be loaded. Contact support.</iframe>
            </apex:outputPanel>
        </apex:panelGroup>
    </apex:form>

    <section class="slds-clearfix">
        <div class="slds-float--right">
            <p style="opacity: 0.5;" class="slds-text-body--small slds-m-right--small">Connected as: {!username}</p>
        </div>
    </section>



</apex:page>